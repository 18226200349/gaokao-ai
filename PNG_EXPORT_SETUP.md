# PNGå¯¼å‡ºåŠŸèƒ½è®¾ç½®è¯´æ˜

## ğŸ“¦ å®‰è£…ä¾èµ–

åœ¨ä½¿ç”¨PNGå¯¼å‡ºåŠŸèƒ½å‰ï¼Œéœ€è¦å…ˆå®‰è£…html2canvasä¾èµ–ï¼š

```bash
cd client
pnpm install html2canvas
```

æˆ–è€…ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npm install
```

è¿™ä¼šè‡ªåŠ¨å®‰è£…clientç›®å½•ä¸‹çš„æ‰€æœ‰ä¾èµ–ï¼ˆå› ä¸ºæœ‰postinstallè„šæœ¬ï¼‰ã€‚

## âœ¨ åŠŸèƒ½è¯´æ˜

### å¯¼å‡ºæ–¹æ¡ˆä¸ºPNGå›¾ç‰‡

å½“ç”¨æˆ·ç‚¹å‡»"å¯¼å‡ºæ–¹æ¡ˆ"æŒ‰é’®æ—¶ï¼š

1. **æ˜¾ç¤ºåŠ è½½æç¤º** - "æ­£åœ¨ç”Ÿæˆå›¾ç‰‡..."
2. **æˆªå–é¡µé¢å†…å®¹** - ä½¿ç”¨html2canvaså°†æ•´ä¸ªæ–¹æ¡ˆé¡µé¢è½¬æ¢ä¸ºcanvas
3. **ç”Ÿæˆé«˜æ¸…å›¾ç‰‡** - ä½¿ç”¨2å€åˆ†è¾¨ç‡ç¡®ä¿æ¸…æ™°åº¦
4. **è‡ªåŠ¨ä¸‹è½½** - å°†å›¾ç‰‡ä¿å­˜ä¸ºPNGæ–‡ä»¶

### æ–‡ä»¶å‘½åæ ¼å¼

```
å¿—æ„¿å¡«æŠ¥æ–¹æ¡ˆ_çœä»½_åˆ†æ•°_æ—¶é—´æˆ³.png
```

ä¾‹å¦‚ï¼š`å¿—æ„¿å¡«æŠ¥æ–¹æ¡ˆ_åŒ—äº¬_650åˆ†_1234567890.png`

## ğŸ¨ å¯¼å‡ºé€‰é¡¹

### html2canvasé…ç½®

```typescript
{
  backgroundColor: '#f5f5f5',  // èƒŒæ™¯è‰²
  scale: 2,                     // 2å€åˆ†è¾¨ç‡ï¼ˆé«˜æ¸…ï¼‰
  useCORS: true,                // æ”¯æŒè·¨åŸŸå›¾ç‰‡
  logging: false,               // å…³é—­æ—¥å¿—
  windowWidth: scrollWidth,     // å®Œæ•´å®½åº¦
  windowHeight: scrollHeight    // å®Œæ•´é«˜åº¦
}
```

### å¯¼å‡ºå†…å®¹åŒ…æ‹¬

- âœ… é¡µé¢æ ‡é¢˜å’ŒåŸºæœ¬ä¿¡æ¯
- âœ… ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ï¼ˆçœä»½ã€ç§‘ç±»ã€åˆ†æ•°ã€ä½æ¬¡ï¼‰
- âœ… æ¨èé™¢æ ¡æ–¹æ¡ˆï¼ˆç¨³å¦¥ã€ç¨³å¥ã€å†²åˆºï¼‰
- âœ… æ¨èä¸“ä¸šåˆ—è¡¨
- âœ… æ‰€æœ‰æ ·å¼å’Œå¸ƒå±€

## ğŸ’¡ ä½¿ç”¨æ–¹æ³•

### ç”¨æˆ·æ“ä½œæµç¨‹

1. åœ¨"å¿—æ„¿å¡«æŠ¥æ–¹æ¡ˆ"é¡µé¢æŸ¥çœ‹æ–¹æ¡ˆ
2. ç‚¹å‡»"å¯¼å‡ºæ–¹æ¡ˆ"æŒ‰é’®
3. ç­‰å¾…å›¾ç‰‡ç”Ÿæˆï¼ˆçº¦1-3ç§’ï¼‰
4. å›¾ç‰‡è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°

### æ³¨æ„äº‹é¡¹

- å¯¼å‡ºçš„æ˜¯æ•´ä¸ªé¡µé¢çš„æˆªå›¾
- åŒ…å«å½“å‰é€‰ä¸­çš„Tabå†…å®¹
- ä¿æŒåŸæœ‰çš„æ ·å¼å’Œå¸ƒå±€
- å›¾ç‰‡æ ¼å¼ä¸ºPNGï¼ˆæ”¯æŒé€æ˜èƒŒæ™¯ï¼‰

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒä»£ç 

```typescript
// ä½¿ç”¨html2canvaså°†DOMè½¬æ¢ä¸ºcanvas
const canvas = await html2canvas(solutionRef.current, options)

// å°†canvasè½¬æ¢ä¸ºBlob
canvas.toBlob((blob: Blob | null) => {
  if (blob) {
    // åˆ›å»ºä¸‹è½½é“¾æ¥
    const url = URL.createObjectURL(blob)
    const link = document.createElement('a')
    link.href = url
    link.download = filename
    link.click()
    URL.revokeObjectURL(url)
  }
}, 'image/png')
```

### Refå¼•ç”¨

```typescript
const solutionRef = useRef<HTMLDivElement>(null)

<div ref={solutionRef}>
  {/* æ–¹æ¡ˆå†…å®¹ */}
</div>
```

## ğŸ“± å…¼å®¹æ€§

- âœ… Chrome/Edge (æ¨è)
- âœ… Firefox
- âœ… Safari
- âœ… ç°ä»£æµè§ˆå™¨

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡UI
- æ˜¾ç¤ºåŠ è½½æç¤ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶URLï¼Œé¿å…å†…å­˜æ³„æ¼
- 2å€åˆ†è¾¨ç‡å¹³è¡¡æ¸…æ™°åº¦å’Œæ€§èƒ½

## ğŸ› æ•…éšœæ’é™¤

### å¦‚æœå¯¼å‡ºå¤±è´¥

1. æ£€æŸ¥html2canvasæ˜¯å¦å·²å®‰è£…
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤é¡µé¢å†…å®¹å·²å®Œå…¨åŠ è½½
4. å°è¯•å…³é—­æµè§ˆå™¨æ‰©å±•ï¼ˆå¦‚å¹¿å‘Šæ‹¦æˆªï¼‰

### å›¾ç‰‡ä¸æ¸…æ™°

- å·²è®¾ç½®scaleä¸º2å€
- å¦‚éœ€æ›´é«˜æ¸…æ™°åº¦ï¼Œå¯è°ƒæ•´scaleå‚æ•°ï¼ˆä¼šå½±å“æ€§èƒ½ï¼‰

## ğŸ“„ ç›¸å…³æ–‡ä»¶

- `client/package.json` - æ·»åŠ äº†html2canvasä¾èµ–
- `client/src/pages/Solution.tsx` - å®ç°äº†å¯¼å‡ºåŠŸèƒ½

